<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type="text/css" media="screen">
		/* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
	</style>
	<title></title>
</head>
<body>
	<div id="map" style="width: 100%; height: 100%"></div>
	<script type="text/javascript">

		var marcadores = null;
		var map = null;
		
		function initMap(){
			map = new google.maps.Map(document.getElementById('map'), {
				zoom: 4,
				center: new google.maps.LatLng(-33.91722, 151.23064)
			});

			map.addListener('click',function(e){
				//alert(e.latLng);
				addMarker(e.latLng);
			});
		}

		function addMarker(direccion){
			//var dir = direccion.split(',');
			var image = 'http://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';

			marcadores = new google.maps.Marker({
			position: direccion,
			map: map,
			icon: image,
			animation: google.maps.Animation.DROP
			});
			
			marcadores.addListener('click',function(e){
				this.setMap(null);
			});
		}
	</script>
	<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdQyRJBP7uchPJJdmIgQbfi4m65MZ-XXI&callback=initMap">
    </script>
</body>
</html>